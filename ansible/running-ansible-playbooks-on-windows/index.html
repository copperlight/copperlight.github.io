
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="A site for knowledge sharing and neat things.">
      
      
        <meta name="author" content="Matthew Johnson">
      
      
        <link rel="canonical" href="http://copperlight.github.io/ansible/running-ansible-playbooks-on-windows/">
      
      
        <link rel="prev" href="../ansible-vault-and-ssh-key-distribution/">
      
      
        <link rel="next" href="../testing-ansible-galaxy-roles-with-docker/">
      
      
      <link rel="icon" href="../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.6.0, mkdocs-material-9.5.29">
    
    
      
        <title>Running Ansible Playbooks on Windows - Copperlight Writes</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.76a95c52.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../../css/custom.css">
    
    <script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      
  


  
  

<script id="__analytics">function __md_analytics(){function n(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],n("js",new Date),n("config","G-DC72N3VD1X"),document.addEventListener("DOMContentLoaded",function(){document.forms.search&&document.forms.search.query.addEventListener("blur",function(){this.value&&n("event","search",{search_term:this.value})}),document$.subscribe(function(){var a=document.forms.feedback;if(void 0!==a)for(var e of a.querySelectorAll("[type=submit]"))e.addEventListener("click",function(e){e.preventDefault();var t=document.location.pathname,e=this.getAttribute("data-md-value");n("event","feedback",{page:t,data:e}),a.firstElementChild.disabled=!0;e=a.querySelector(".md-feedback__note [data-md-value='"+e+"']");e&&(e.hidden=!1)}),a.hidden=!1}),location$.subscribe(function(e){n("config","G-DC72N3VD1X",{page_path:e.pathname})})});var e=document.createElement("script");e.async=!0,e.src="https://www.googletagmanager.com/gtag/js?id=G-DC72N3VD1X",document.getElementById("__analytics").insertAdjacentElement("afterEnd",e)}</script>
  
    <script>"undefined"!=typeof __md_analytics&&__md_analytics()</script>
  

    
    
    
  </head>
  
  
    <body dir="ltr">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#running-ansible-playbooks-on-windows" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../.." title="Copperlight Writes" class="md-header__button md-logo" aria-label="Copperlight Writes" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Copperlight Writes
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Running Ansible Playbooks on Windows
            
          </span>
        </div>
      </div>
    </div>
    
    
      <script>var media,input,key,value,palette=__md_get("__palette");if(palette&&palette.color){"(prefers-color-scheme)"===palette.color.media&&(media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']"),palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent"));for([key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header__source">
        <a href="https://github.com/copperlight/copperlight.github.io" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.5.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    



<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../.." title="Copperlight Writes" class="md-nav__button md-logo" aria-label="Copperlight Writes" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg>

    </a>
    Copperlight Writes
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/copperlight/copperlight.github.io" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.5.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../.." class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Home
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
    
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2" checked>
        
          
          <label class="md-nav__link" for="__nav_2" id="__nav_2_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Ansible
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_2_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_2">
            <span class="md-nav__icon md-icon"></span>
            Ansible
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../ansible-vault-and-ssh-key-distribution/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Ansible Vault and SSH Key Distribution
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  <span class="md-ellipsis">
    Running Ansible Playbooks on Windows
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  <span class="md-ellipsis">
    Running Ansible Playbooks on Windows
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#but-first-some-history" class="md-nav__link">
    <span class="md-ellipsis">
      But First, Some History
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#motivation" class="md-nav__link">
    <span class="md-ellipsis">
      Motivation
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#ansible-roadmap-update" class="md-nav__link">
    <span class="md-ellipsis">
      Ansible Roadmap Update
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#pre-requisites" class="md-nav__link">
    <span class="md-ellipsis">
      Pre-Requisites
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#playbooks" class="md-nav__link">
    <span class="md-ellipsis">
      Playbooks
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#demonstration" class="md-nav__link">
    <span class="md-ellipsis">
      Demonstration
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../testing-ansible-galaxy-roles-with-docker/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Testing Ansible Galaxy Roles with Docker
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3" >
        
          
          <label class="md-nav__link" for="__nav_3" id="__nav_3_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    AWS
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3">
            <span class="md-nav__icon md-icon"></span>
            AWS
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../aws/assume-role-with-awscli/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Assume Role with AWSCLI
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../aws/aws-credential-files-for-java-and-python/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    AWS Credential Files for Java and Python
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../aws/build-a-fake-instance-metadata-server-for-ubuntu-on-vagrant/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Build a Fake Instance Metadata Server for Ubuntu on Vagrant
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../aws/checking-and-changing-content-type-of-s3-object-with-awscli/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Checking and Changing Content-Type of S3 Object with AWSCLI
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../aws/configuring-multiple-interfaces-on-the-same-network-in-ec2/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Configuring Multiple Interfaces on the Same Network in EC2
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4" >
        
          
          <label class="md-nav__link" for="__nav_4" id="__nav_4_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    GitHub
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4">
            <span class="md-nav__icon md-icon"></span>
            GitHub
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../github/how-i-built-my-site/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    How I Built My Site
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5" >
        
          
          <label class="md-nav__link" for="__nav_5" id="__nav_5_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Linux
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5">
            <span class="md-nav__icon md-icon"></span>
            Linux
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../linux/apache-deflate-and-cors-headers/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Apache Deflate and CORS Headers
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../linux/linux-ftrace-delivers-dtrace-like-functionality/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Linux ftrace Delivers dtrace-like Functionality
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_6" >
        
          
          <label class="md-nav__link" for="__nav_6" id="__nav_6_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Misc
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_6_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_6">
            <span class="md-nav__icon md-icon"></span>
            Misc
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../misc/clone-stash-pull-requests/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Clone Stash Pull Requests
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../misc/dual-boot-osx-10.10-and-ubuntu-14.04-on-a-2013-macbook-pro-retina/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Dual Boot OSX 10.10 and Ubuntu 14.04 on a 2013 Macbook Pro Retina
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../misc/make-sublimetext-awesome/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Make SublimeText Awesome
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../misc/reset-jenkins-build-number/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Reset Jenkins Build Number
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../misc/switching-jdks-in-osx/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Switching JDKs in OSX
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_7" >
        
          
          <label class="md-nav__link" for="__nav_7" id="__nav_7_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Python
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_7_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_7">
            <span class="md-nav__icon md-icon"></span>
            Python
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../python/accessing-google-apis-with-python/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Accessing Google APIs with Python
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../python/building-rest-apis-with-python-flask/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Building REST APIs with Python Flask
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../python/install-the-latest-python-versions-on-macosx/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Install the Latest Python Versions on Mac OSX
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../python/memory-profiling-with-pyrasite-and-heapy/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Memory Profiling with Pyrasite and Heapy
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../python/stop-using-print-for-debugging/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Stop Using "print" for Debugging
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_8" >
        
          
          <label class="md-nav__link" for="__nav_8" id="__nav_8_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Recipes
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_8_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_8">
            <span class="md-nav__icon md-icon"></span>
            Recipes
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../recipes/galaxys-best-margarita/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Galaxy's Best Margarita
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_9" >
        
          
          <label class="md-nav__link" for="__nav_9" id="__nav_9_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Running
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_9_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_9">
            <span class="md-nav__icon md-icon"></span>
            Running
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../running/garmin-935-navigation/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Garmin 935 Navigation
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_10" >
        
          
          <label class="md-nav__link" for="__nav_10" id="__nav_10_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Scala
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_10_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_10">
            <span class="md-nav__icon md-icon"></span>
            Scala
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../scala/intellij-configuration-tips/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    IntelliJ Configuration Tips
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../scala/jmh-testing-with-scala/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    JMH Testing with Scala
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../scala/overview-of-debugging-tools/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Overview of Debugging Tools
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../scala/scalafmt-configuration-tips/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Scalafmt Configuration Tips
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../scala/starting-scala-repls-with-gradle-and-sbt/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Starting Scala REPLs with Gradle and SBT
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../scala/testing-aws-clients-with-iam-assumerole-credentials-in-scala/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Testing AWS Clients with IAM AssumeRole Credentials in Scala
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../scala/using-gradle-to-run-scala-projects-locally/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Using Gradle to Run Scala Projects Locally
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../scala/using-the-scala-repl-to-configure-amazon-ses-notifications/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Using the Scala REPL to Configure Amazon SES Notifications
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_11" >
        
          
          <label class="md-nav__link" for="__nav_11" id="__nav_11_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Shell
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_11_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_11">
            <span class="md-nav__icon md-icon"></span>
            Shell
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../shell/measuring-transfer-speed-over-time-with-curl/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Measuring Transfer Speed Over Time with cURL
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../shell/parsing-json-on-the-command-line/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Parsing JSON on the Command Line
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../shell/pet-cli-snippet-manager/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    pet - CLI Snippet Manager
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../shell/schedule-ad-hoc-jobs-for-later-on-an-instance-with-atd/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Schedule Ad-Hoc Jobs for Later on an Instance with atd
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../shell/zsh-keyboard-shortcuts/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Z Shell Keyboard Shortcuts
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_12" >
        
          
          <label class="md-nav__link" for="__nav_12" id="__nav_12_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Stocks
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_12_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_12">
            <span class="md-nav__icon md-icon"></span>
            Stocks
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../stocks/nflx-quarterly-subscriber-growth/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Netflix Quarterly Growth
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_13" >
        
          
          <label class="md-nav__link" for="__nav_13" id="__nav_13_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Talks
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_13_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_13">
            <span class="md-nav__icon md-icon"></span>
            Talks
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../talks/favorite/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Favorite
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../talks/netflix-atlas-telemetry-a-platform-begets-an-ecosystem/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Netflix Atlas Telemetry - A Platform Begets an Ecosystem
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#but-first-some-history" class="md-nav__link">
    <span class="md-ellipsis">
      But First, Some History
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#motivation" class="md-nav__link">
    <span class="md-ellipsis">
      Motivation
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#ansible-roadmap-update" class="md-nav__link">
    <span class="md-ellipsis">
      Ansible Roadmap Update
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#pre-requisites" class="md-nav__link">
    <span class="md-ellipsis">
      Pre-Requisites
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#playbooks" class="md-nav__link">
    <span class="md-ellipsis">
      Playbooks
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#demonstration" class="md-nav__link">
    <span class="md-ellipsis">
      Demonstration
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  


<h1 id="running-ansible-playbooks-on-windows">Running Ansible Playbooks on Windows<a class="headerlink" href="#running-ansible-playbooks-on-windows" title="Permanent link">&para;</a></h1>
<div class="meta">
  <span class="date"><small>2014-06-29</small></span>
  <span class="discuss"><a class="github-button" href="https://github.com/copperlight/copperlight.github.io/issues" data-icon="octicon-issue-opened" aria-label="Discuss copperlight/copperlight.github.io on GitHub">Discuss</a></span>
</div>
<h2 id="but-first-some-history">But First, Some History<a class="headerlink" href="#but-first-some-history" title="Permanent link">&para;</a></h2>
<p>In early 2006, running almost a thousand servers for Blackboard Product Development that were evenly
distributed across Windows, Linux and Solaris, we needed an automation tool that would allow us to
quickly deploy and configure the Blackboard Learning Management System (LMS).  The real sticking
point for us was managing the Windows ecosystem.</p>
<p>The <a href="https://github.com/puppetlabs/puppet/commit/54e9b5e3561977ea063417da12c46aad2a4c1332">first commit</a>
of PuppetLabs Puppet occurred in April 2005 and the <a href="https://github.com/puppetlabs/puppet/tree/0.9.3">first tagged release</a>
was on Jan 3, 2006.  The <a href="https://github.com/opscode/chef/commit/b5117775e86cff40399187b6292c98fba9dc5034">first commit</a>
of OpsCode Chef occurred in March 2008 and the <a href="https://github.com/opscode/chef/tree/0.5.2">first tagged release</a>
was on Jan 31, 2009.  Needless to say, the modern configuration management ecosystem was much sparser
in 2006 then as compared to today.  Puppet was still very new and in the process of gaining mind share
and adding functionality; it did not support Windows at first.  <a href="http://cfengine.com/">CFEngine</a> was
available, but it also did not support Windows in the open source version.</p>
<p>I worked with Dave Carter at the beginning of 2006 to develop our own in-house configuration
management system that we called Fusion.  It was based on <a href="http://ant.apache.org/">Ant</a> and
<a href="http://ant-contrib.sourceforge.net/tasks/tasks/index.html">Ant-Contrib</a>.  Since Blackboard was a
Java based application, we always had one or more versions of JDKs installed on our systems as a
part of the imaging or virtual machine cloning process, so picking a tool that ran on the JDK made
sense and offered us the platform independence we needed.  Dave developed a state machine with a
socket listener that would accept XML-formatted messages and then kick off various tasks.  I
developed a library and property inheritance hierarchy for the the system, along with a parallel job
execution client and added the set of scripts that deployed and configured the Blackboard LMS.  I
figured out that by cherry-picking a few key utilities out of the <a href="http://unxutils.sourceforge.net/">UnxUtils distribution</a>,
I could write Windows batch scripts in a manner similar to Linux bash scripts and this lent to a
somewhat manageable level of consistency between the disparate operating systems without completely
abandoning the hooks we needed for Windows.</p>
<h2 id="motivation">Motivation<a class="headerlink" href="#motivation" title="Permanent link">&para;</a></h2>
<p>Anyone who has spoken with me in the past year about my work knows that <a href="http://www.ansible.com/home">Ansible</a>
is hands-down my favorite piece of software tooling.  Using Ansible, I was able to effectively
manage 500-odd Ubuntu Linux systems at Blackboard, half of which were deployed in a VPC at AWS and
half of which were deployed in the Blackboard Managed Hosting data centers.  Part of the challenge
that we had at Blackboard in the Product Development department is that 30-40% of the several
thousand servers used for development and testing were Windows, which made it difficult to choose a
single configuration management system to rule them all.  For the better part of a year, I kept
saying that it was a terrible shame that Ansible did not support Windows and that Opscode Chef would
probably be the best choice for configuration management of all systems, since it arguably had the
best support for that platform in 2013.  After meeting with <a href="https://www.linkedin.com/in/michaeldehaan">Michael DeHaan</a>,
creator and CTO of Ansible, at Blackboard headquarters, we talked through their rough plans for
Windows support.  In short, it was something they wanted to be thoughtful about.  Some time later,
we had a hack day organized at Blackboard and I decided that I would attempt to develop an Ansible
playbook that could install and uninstall a JDK on Windows, using my previous experience with
building the Fusion configuration management system.</p>
<p>It turns out that this works. Quite well. Even though it wasn't intended to.</p>
<h2 id="ansible-roadmap-update">Ansible Roadmap Update<a class="headerlink" href="#ansible-roadmap-update" title="Permanent link">&para;</a></h2>
<p>On June 19, 2014, Michael DeHaan announced <a href="http://www.ansible.com/blog/windows-is-coming">Windows Is Coming</a>.
PowerShell remoting is a far cleaner solution and I am looking forward to seeing it hit the release
branch, although I don't have to worry about Windows machines so much these days.  I learned this
nifty fact from <a href="https://devopsu.com/newsletters/ansible-weekly/38.html">Ansible Weekly Issue 38</a>;
this is not a bad way to keep up on the latest Ansible news.</p>
<h2 id="pre-requisites">Pre-Requisites<a class="headerlink" href="#pre-requisites" title="Permanent link">&para;</a></h2>
<p>Windows + Cygwin + SSHd + Python</p>
<h2 id="playbooks">Playbooks<a class="headerlink" href="#playbooks" title="Permanent link">&para;</a></h2>
<p>Ansible inventory file <code>hosts</code>:</p>
<div class="highlight"><pre><span></span><code><span class="k">[w7x64-jf]</span>
<span class="na">w7x64-jf.pd.local</span>
</code></pre></div>
<p>JDK7 installation playbook <code>jdk7_install.yml</code>:</p>
<div class="highlight"><pre><span></span><code><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">install oracle jdk7</span>
<span class="w">  </span><span class="nt">hosts</span><span class="p">:</span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">w7x64-jf</span>
<span class="w">  </span><span class="nt">user</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">administrator</span>
<span class="w">  </span><span class="nt">gather_facts</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">false</span>
<span class="w">  </span><span class="nt">vars</span><span class="p">:</span>
<span class="w">    </span><span class="nt">version</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">7u45</span>
<span class="w">    </span><span class="nt">build</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">b18</span>
<span class="w">    </span><span class="nt">version_padded</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">1.7.0_45</span>
<span class="w">    </span><span class="nt">dodrootca2</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">c:\\jdk\{{version_padded}}\\jre\\lib\\security\\dod.root-ca-2.pem</span>
<span class="w">    </span><span class="nt">cacerts</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">c:\\jdk{{version_padded}}\\jre\\lib\\security\\cacerts</span>
<span class="w">  </span><span class="nt">tasks</span><span class="p">:</span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">command</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">wget -P /usr/local/src --no-cookies --no-check-certificate --header Cookie:gpw_e24=http%3A%2F%2Fwww.oracle.com http://download.oracle.com/otn-pub/java/jdk/{{version}}-{{build}}/jdk-{{version}}-windows-x64.exe creates=/usr/local/src/jdk-{{version}}-windows-x64.exe</span>

<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">file</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">path=/usr/local/src/jdk-{{version}}-windows-x64.exe mode=0755</span>

<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">shell</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">/usr/local/src/jdk-{{version}}-windows-x64.exe /s INSTALLDIR=c:\\jdk{{version_padded}} /INSTALLDIRPUBJRE=c:\\jre{{version_padded}} REBOOT=Suppress ADDLOCAL=ToolsFeature,SourceFeature,PublicjreFeature AUTOUPDATE=0 SYSTRAY=0 SYSTRAY=0 /L c:\\cygwin\\usr\\local\\src\\jdk-install-log.txt creates=/cygdrive/c/jdk{{version_padded}}</span>

<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">copy</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">src=../certs/dod.root-ca-2.pem dest=/cygdrive/c/jdk{{version_padded}}/jre/lib/security/dod.root-ca-2.pem</span>

<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">command</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">/cygdrive/c/jdk{{version_padded}}/bin/keytool -import -trustcacerts -alias dodrootca2 -file {{dodrootca2}} -keystore $cacerts -storepass changeit -noprompt</span>
<span class="w">    </span><span class="nt">ignore_errors</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">true</span>

<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">copy</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">src=files/cygdrive_c_java_jre_lib_security_US_export_policy.jar dest=/cygdrive/c/jdk{{version_padded}}/jre/lib/security/US_export_policy.jar</span>

<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">copy</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">src=files/cygdrive_c_java_jre_lib_security_local_policy.jar dest=/cygdrive/c/jdk{{version_padded}}/jre/lib/security/local_policy.jar</span>

<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">shell</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">/cygdrive/c/jdk{{version_padded}}/bin/java -version 2&gt;&amp;1 |head -1 |awk &#39;{print $3}&#39; |sed -e &#39;s/&quot;//g&#39;</span>
<span class="w">    </span><span class="nt">register</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">java_version</span>

<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">fail</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">msg=&quot;The Java version does not match the expected value {{ version_padded }}.&quot;</span>
<span class="w">    </span><span class="nt">when</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;&#39;{{</span><span class="nv"> </span><span class="s">java_version.stdout</span><span class="nv"> </span><span class="s">}}&#39;</span><span class="nv"> </span><span class="s">!=</span><span class="nv"> </span><span class="s">&#39;{{</span><span class="nv"> </span><span class="s">version_padded</span><span class="nv"> </span><span class="s">}}&#39;&quot;</span>
</code></pre></div>
<p>JDK7 uninstallation playbook <code>jdk7_uninstall.yml</code>:</p>
<div class="highlight"><pre><span></span><code><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">uninstall oracle jdk7</span>
<span class="w">  </span><span class="nt">hosts</span><span class="p">:</span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">w7x64-jf</span>
<span class="w">  </span><span class="nt">user</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">administrator</span>
<span class="w">  </span><span class="nt">gather_facts</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">false</span>
<span class="w">  </span><span class="nt">vars</span><span class="p">:</span>
<span class="w">    </span><span class="nt">version</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">7u45</span>
<span class="w">    </span><span class="nt">version_padded</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">1.7.0_45</span>
<span class="w">    </span><span class="nt">version_text</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;7</span><span class="nv"> </span><span class="s">Update</span><span class="nv"> </span><span class="s">45&quot;</span>
<span class="w">  </span><span class="nt">tasks</span><span class="p">:</span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">template</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">src=templates/usr_local_src_remove-programs.vbs dest=/usr/local/src/remove-programs.vbs</span>

<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">shell</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">cscript remove-programs.vbs |grep &quot;Java {{version_text}} (64-bit)&quot; chdir=/usr/local/src</span>
<span class="w">    </span><span class="nt">register</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">result</span>
<span class="w">    </span><span class="nt">ignore_errors</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">true</span>

<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">command</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">cscript remove-programs.vbs /uninstall &quot;Java {{version_text}} (64-bit)&quot; chdir=/usr/local/src</span>
<span class="w">    </span><span class="nt">when</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">result|success</span>

<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">shell</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">cscript remove-programs.vbs |grep &quot;Java SE Development Kit {{version_text}} (64-bit)&quot; chdir=/usr/local/src</span>
<span class="w">    </span><span class="nt">register</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">result</span>
<span class="w">    </span><span class="nt">ignore_errors</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">true</span>

<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">command</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">cscript remove-programs.vbs /uninstall &quot;Java SE Development Kit {{version_text}} (64-bit)&quot; chdir=/usr/local/src</span>
<span class="w">    </span><span class="nt">when</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">result|success</span>

<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">file</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">path={{item}} state=absent</span>
<span class="w">    </span><span class="nt">with_items</span><span class="p">:</span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">/usr/local/src/jdk-{{version}}-windows-x64.exe</span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">/usr/local/src/jdk-install-log.txt</span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">/usr/local/src/remove-programs.vbs</span>
</code></pre></div>
<p>The <code>remove-programs.vbs</code> helper script:</p>
<div class="highlight"><pre><span></span><code><span class="k">If</span><span class="w"> </span><span class="n">Wscript</span><span class="p">.</span><span class="n">Arguments</span><span class="p">.</span><span class="n">Count</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="k">Then</span>
<span class="w">  </span><span class="n">inventory_software</span><span class="p">()</span>
<span class="k">ElseIf</span><span class="w"> </span><span class="n">Wscript</span><span class="p">.</span><span class="n">Arguments</span><span class="p">.</span><span class="n">Count</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">2</span><span class="w"> </span><span class="k">Then</span>
<span class="w">  </span><span class="k">If</span><span class="w"> </span><span class="n">Wscript</span><span class="p">.</span><span class="n">Arguments</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;/uninstall&quot;</span><span class="w"> </span><span class="k">Then</span>
<span class="w">    </span><span class="c1">&#39;Expecting: cscript remove-programs.vbs /uninstall &quot;Java(TM) 6 Update 26&quot;</span>
<span class="w">    </span><span class="c1">&#39;Expecting: cscript remove-programs.vbs /uninstall &quot;Java(TM) SE Development Kit 6 Update 26&quot;</span>
<span class="w">    </span><span class="n">uninstall_software</span><span class="p">(</span><span class="n">Wscript</span><span class="p">.</span><span class="n">Arguments</span><span class="p">(</span><span class="mi">1</span><span class="p">))</span>
<span class="w">  </span><span class="k">Else</span>
<span class="w">    </span><span class="n">Wscript</span><span class="p">.</span><span class="n">Echo</span><span class="w"> </span><span class="s2">&quot;Usage: remove-programs.vbs [/uninstall &quot;&quot;software&quot;&quot;]&quot;</span>
<span class="w">  </span><span class="k">End</span><span class="w"> </span><span class="k">If</span>
<span class="k">Else</span>
<span class="w">  </span><span class="n">Wscript</span><span class="p">.</span><span class="n">Echo</span><span class="w"> </span><span class="s2">&quot;Usage: remove-programs.vbs [/uninstall &quot;&quot;software&quot;&quot;]&quot;</span>
<span class="k">End</span><span class="w"> </span><span class="k">If</span>

<span class="kd">Sub</span><span class="w"> </span><span class="nf">inventory_software</span><span class="p">()</span>
<span class="w">  </span><span class="n">strComputer</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;.&quot;</span>

<span class="w">  </span><span class="k">Set</span><span class="w"> </span><span class="n">objWMIService</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">GetObject</span><span class="p">(</span><span class="s2">&quot;winmgmts:&quot;</span><span class="w"> </span><span class="n">_</span>
<span class="w">    </span><span class="o">&amp;</span><span class="w"> </span><span class="s2">&quot;{impersonationLevel=impersonate}!\\&quot;</span><span class="w"> </span><span class="n">_</span>
<span class="w">    </span><span class="o">&amp;</span><span class="w"> </span><span class="n">strComputer</span><span class="w"> </span><span class="o">&amp;</span><span class="w"> </span><span class="s2">&quot;\root\cimv2&quot;</span><span class="p">)</span>
<span class="w">  </span><span class="k">Set</span><span class="w"> </span><span class="n">colSoftware</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">objWMIService</span><span class="p">.</span><span class="n">ExecQuery</span><span class="w"> </span><span class="n">_</span>
<span class="w">    </span><span class="p">(</span><span class="s2">&quot;Select * from Win32_Product&quot;</span><span class="p">)</span>

<span class="w">  </span><span class="k">For</span><span class="w"> </span><span class="k">Each</span><span class="w"> </span><span class="n">objSoftware</span><span class="w"> </span><span class="n">in</span><span class="w"> </span><span class="n">colSoftware</span>
<span class="w">    </span><span class="n">Wscript</span><span class="p">.</span><span class="n">Echo</span><span class="w"> </span><span class="s2">&quot;Name: &quot;</span><span class="w"> </span><span class="o">&amp;</span><span class="w"> </span><span class="n">objSoftware</span><span class="p">.</span><span class="n">Name</span>
<span class="w">    </span><span class="c1">&#39;Wscript.Echo &quot;Version: &quot; &amp; objSoftware.Version</span>
<span class="w">  </span><span class="k">Next</span>
<span class="k">End</span><span class="w"> </span><span class="k">Sub</span>

<span class="kd">Sub</span><span class="w"> </span><span class="nf">inventory_java_software</span><span class="p">()</span>
<span class="w">  </span><span class="n">strComputer</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;.&quot;</span>

<span class="w">  </span><span class="k">Set</span><span class="w"> </span><span class="n">objWMIService</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">GetObject</span><span class="p">(</span><span class="s2">&quot;winmgmts:&quot;</span><span class="w"> </span><span class="n">_</span>
<span class="w">    </span><span class="o">&amp;</span><span class="w"> </span><span class="s2">&quot;{impersonationLevel=impersonate}!\\&quot;</span><span class="w"> </span><span class="n">_</span>
<span class="w">    </span><span class="o">&amp;</span><span class="w"> </span><span class="n">strComputer</span><span class="w"> </span><span class="o">&amp;</span><span class="w"> </span><span class="s2">&quot;\root\cimv2&quot;</span><span class="p">)</span>
<span class="w">  </span><span class="k">Set</span><span class="w"> </span><span class="n">colSoftware</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">objWMIService</span><span class="p">.</span><span class="n">ExecQuery</span><span class="w"> </span><span class="n">_</span>
<span class="w">    </span><span class="p">(</span><span class="s2">&quot;Select * from Win32_Product &quot;</span><span class="w"> </span><span class="n">_</span>
<span class="w">        </span><span class="o">&amp;</span><span class="w"> </span><span class="s2">&quot;Where Name Like &#39;Java%&#39;&quot;</span><span class="p">)</span>

<span class="w">  </span><span class="k">For</span><span class="w"> </span><span class="k">Each</span><span class="w"> </span><span class="n">objSoftware</span><span class="w"> </span><span class="n">in</span><span class="w"> </span><span class="n">colSoftware</span>
<span class="w">    </span><span class="n">Wscript</span><span class="p">.</span><span class="n">Echo</span><span class="w"> </span><span class="s2">&quot;Name: &quot;</span><span class="w"> </span><span class="o">&amp;</span><span class="w"> </span><span class="n">objSoftware</span><span class="p">.</span><span class="n">Name</span>
<span class="w">    </span><span class="n">Wscript</span><span class="p">.</span><span class="n">Echo</span><span class="w"> </span><span class="s2">&quot;Version: &quot;</span><span class="w"> </span><span class="o">&amp;</span><span class="w"> </span><span class="n">objSoftware</span><span class="p">.</span><span class="n">Version</span>
<span class="w">  </span><span class="k">Next</span>
<span class="k">End</span><span class="w"> </span><span class="k">Sub</span>

<span class="kd">Sub</span><span class="w"> </span><span class="nf">uninstall_software</span><span class="p">(</span><span class="n">strApplicationName</span><span class="p">)</span>
<span class="w">  </span><span class="c1">&#39;Make sure to run this with Administrator privileges</span>
<span class="w">  </span><span class="n">strComputer</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;.&quot;</span>

<span class="w">  </span><span class="k">Set</span><span class="w"> </span><span class="n">objWMIService</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">GetObject</span><span class="p">(</span><span class="s2">&quot;winmgmts:&quot;</span><span class="w"> </span><span class="n">_</span>
<span class="w">    </span><span class="o">&amp;</span><span class="w"> </span><span class="s2">&quot;{impersonationLevel=impersonate}!\\&quot;</span><span class="w"> </span><span class="n">_</span>
<span class="w">    </span><span class="o">&amp;</span><span class="w"> </span><span class="n">strComputer</span><span class="w"> </span><span class="o">&amp;</span><span class="w"> </span><span class="s2">&quot;\root\cimv2&quot;</span><span class="p">)</span>
<span class="w">  </span><span class="k">Set</span><span class="w"> </span><span class="n">colSoftware</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">objWMIService</span><span class="p">.</span><span class="n">ExecQuery</span><span class="w"> </span><span class="n">_</span>
<span class="w">    </span><span class="p">(</span><span class="s2">&quot;Select * From Win32_Product Where Name = &#39;&quot;</span><span class="w"> </span><span class="n">_</span>
<span class="w">    </span><span class="o">&amp;</span><span class="w"> </span><span class="n">strApplicationName</span><span class="w"> </span><span class="o">&amp;</span><span class="w"> </span><span class="s2">&quot;&#39;&quot;</span><span class="p">)</span>

<span class="w">  </span><span class="k">For</span><span class="w"> </span><span class="k">Each</span><span class="w"> </span><span class="n">objSoftware</span><span class="w"> </span><span class="n">in</span><span class="w"> </span><span class="n">colSoftware</span>
<span class="w">    </span><span class="n">objSoftware</span><span class="p">.</span><span class="n">Uninstall</span><span class="p">()</span>
<span class="w">  </span><span class="k">Next</span>
<span class="k">End</span><span class="w"> </span><span class="k">Sub</span>
</code></pre></div>
<h2 id="demonstration">Demonstration<a class="headerlink" href="#demonstration" title="Permanent link">&para;</a></h2>
<p>File system state before install:</p>
<div class="highlight"><pre><span></span><code>administrator@W7X64-JF~
$<span class="w"> </span>ls<span class="w"> </span>-l<span class="w"> </span>/cygdrive/c<span class="w"> </span><span class="p">|</span>egrep<span class="w"> </span><span class="s2">&quot;jdk|jre&quot;</span>
drwx------+<span class="w"> </span><span class="m">1</span><span class="w"> </span>SYSTEM<span class="w"> </span>SYSTEM<span class="w"> </span><span class="m">0</span><span class="w"> </span>Jun<span class="w"> </span><span class="m">24</span><span class="w"> </span><span class="m">2010</span><span class="w"> </span>jdk5
drwx------+<span class="w"> </span><span class="m">1</span><span class="w"> </span>SYSTEM<span class="w"> </span>SYSTEM<span class="w"> </span><span class="m">0</span><span class="w"> </span>Oct<span class="w"> </span><span class="m">4</span><span class="w"> </span><span class="m">2012</span><span class="w"> </span>jdk6
drwx------+<span class="w"> </span><span class="m">1</span><span class="w"> </span>SYSTEM<span class="w"> </span>SYSTEM<span class="w"> </span><span class="m">0</span><span class="w"> </span>Oct<span class="w"> </span><span class="m">4</span><span class="w"> </span><span class="m">2012</span><span class="w"> </span>jdk7
</code></pre></div>
<p>Install JDK7 on Windows:</p>
<div class="highlight"><pre><span></span><code>copperpro:windows-hack<span class="w"> </span>mjohnson$<span class="w"> </span>ansible-playbook<span class="w"> </span>-i<span class="w"> </span>hosts<span class="w"> </span>jdk7_install.yml

PLAY<span class="w"> </span><span class="o">[</span>install<span class="w"> </span>oracle<span class="w"> </span>jdk7<span class="o">]</span><span class="w"> </span>****************************************************

TASK:<span class="w"> </span><span class="o">[</span><span class="nb">command</span><span class="w"> </span>wget<span class="w"> </span>-P<span class="w"> </span>/usr/local/src<span class="w"> </span>--no-cookies<span class="w"> </span>--no-check-certificate<span class="w"> </span>--header<span class="w"> </span>Cookie:gpw_e24<span class="o">=</span>http%3A%2F%2Fwww.oracle.com<span class="w"> </span>http://download.oracle.com/otn-pub/java/jdk/7u45-b18/jdk-7u45-windows-x64.exe<span class="w"> </span><span class="nv">creates</span><span class="o">=</span>/usr/local/src/jdk-7u45-windows-x64.exe<span class="o">]</span><span class="w"> </span>***
changed:<span class="w"> </span><span class="o">[</span>w7x64-jf.pd.local<span class="o">]</span>

TASK:<span class="w"> </span><span class="o">[</span>file<span class="w"> </span><span class="nv">path</span><span class="o">=</span>/usr/local/src/jdk-7u45-windows-x64.exe<span class="w"> </span><span class="nv">mode</span><span class="o">=</span><span class="m">0755</span><span class="o">]</span><span class="w"> </span>***********
changed:<span class="w"> </span><span class="o">[</span>w7x64-jf.pd.local<span class="o">]</span>

TASK:<span class="w"> </span><span class="o">[</span>shell<span class="w"> </span>/usr/local/src/jdk-7u45-windows-x64.exe<span class="w"> </span>/s<span class="w"> </span><span class="nv">INSTALLDIR</span><span class="o">=</span>c:<span class="se">\\</span>jdk1.7.0_45<span class="w"> </span>/INSTALLDIRPUBJRE<span class="o">=</span>c:<span class="se">\\</span>jre1.7.0_45<span class="w"> </span><span class="nv">REBOOT</span><span class="o">=</span>Suppress<span class="w"> </span><span class="nv">ADDLOCAL</span><span class="o">=</span>ToolsFeature,SourceFeature,PublicjreFeature<span class="w"> </span><span class="nv">AUTOUPDATE</span><span class="o">=</span><span class="m">0</span><span class="w"> </span><span class="nv">SYSTRAY</span><span class="o">=</span><span class="m">0</span><span class="w"> </span><span class="nv">SYSTRAY</span><span class="o">=</span><span class="m">0</span><span class="w"> </span>/L<span class="w"> </span>c:<span class="se">\\</span>cygwin<span class="se">\\</span>usr<span class="se">\\</span>local<span class="se">\\</span>src<span class="se">\\</span>jdk-install-log.txt<span class="w"> </span><span class="nv">creates</span><span class="o">=</span>/cygdrive/c/jdk1.7.0_45<span class="o">]</span><span class="w"> </span>***
changed:<span class="w"> </span><span class="o">[</span>w7x64-jf.pd.local<span class="o">]</span>

TASK:<span class="w"> </span><span class="o">[</span>copy<span class="w"> </span><span class="nv">src</span><span class="o">=</span>../certs/dod.root-ca-2.pem<span class="w"> </span><span class="nv">dest</span><span class="o">=</span>/cygdrive/c/jdk1.7.0_45/jre/lib/security/dod.root-ca-2.pem<span class="o">]</span><span class="w"> </span>***
changed:<span class="w"> </span><span class="o">[</span>w7x64-jf.pd.local<span class="o">]</span>

TASK:<span class="w"> </span><span class="o">[</span><span class="nb">command</span><span class="w"> </span>/cygdrive/c/jdk1.7.0_45/bin/keytool<span class="w"> </span>-import<span class="w"> </span>-trustcacerts<span class="w"> </span>-alias<span class="w"> </span>dodrootca2<span class="w"> </span>-file<span class="w"> </span>c:<span class="se">\\</span>jdk1.7.0_45<span class="se">\\</span>jre<span class="se">\\</span>lib<span class="se">\\</span>security<span class="se">\\</span>dod.root-ca-2.pem<span class="w"> </span>-keystore<span class="w"> </span>c:<span class="se">\\</span>jdk1.7.0_45<span class="se">\\</span>jre<span class="se">\\</span>lib<span class="se">\\</span>security<span class="se">\\</span>cacerts<span class="w"> </span>-storepass<span class="w"> </span>changeit<span class="w"> </span>-noprompt<span class="o">]</span><span class="w"> </span>***
changed:<span class="w"> </span><span class="o">[</span>w7x64-jf.pd.local<span class="o">]</span>

TASK:<span class="w"> </span><span class="o">[</span>copy<span class="w"> </span><span class="nv">src</span><span class="o">=</span>files/cygdrive_c_java_jre_lib_security_US_export_policy.jar<span class="w"> </span><span class="nv">dest</span><span class="o">=</span>/cygdrive/c/jdk1.7.0_45/jre/lib/security/US_export_policy.jar<span class="o">]</span><span class="w"> </span>***
changed:<span class="w"> </span><span class="o">[</span>w7x64-jf.pd.local<span class="o">]</span>

TASK:<span class="w"> </span><span class="o">[</span>copy<span class="w"> </span><span class="nv">src</span><span class="o">=</span>files/cygdrive_c_java_jre_lib_security_local_policy.jar<span class="w"> </span><span class="nv">dest</span><span class="o">=</span>/cygdrive/c/jdk1.7.0_45/jre/lib/security/local_policy.jar<span class="o">]</span><span class="w"> </span>***
changed:<span class="w"> </span><span class="o">[</span>w7x64-jf.pd.local<span class="o">]</span>

TASK:<span class="w"> </span><span class="o">[</span>shell<span class="w"> </span>/cygdrive/c/jdk1.7.0_45/bin/java<span class="w"> </span>-version<span class="w"> </span><span class="m">2</span>&gt;<span class="p">&amp;</span><span class="m">1</span><span class="w"> </span><span class="p">|</span>head<span class="w"> </span>-1<span class="w"> </span><span class="p">|</span>awk<span class="w"> </span><span class="s1">&#39;{print $3}&#39;</span><span class="w"> </span><span class="p">|</span>sed<span class="w"> </span>-e<span class="w"> </span><span class="s1">&#39;s/&quot;//g&#39;</span><span class="o">]</span><span class="w"> </span>***
changed:<span class="w"> </span><span class="o">[</span>w7x64-jf.pd.local<span class="o">]</span>

TASK:<span class="w"> </span><span class="o">[</span>fail<span class="w"> </span><span class="nv">msg</span><span class="o">=</span><span class="s2">&quot;The Java version does not match the expected value 1.7.0_45.&quot;</span><span class="o">]</span><span class="w"> </span>***
skipping:<span class="w"> </span><span class="o">[</span>w7x64-jf.pd.local<span class="o">]</span>

PLAY<span class="w"> </span>RECAP<span class="w"> </span>********************************************************************
w7x64-jf.pd.local<span class="w"> </span>:<span class="w"> </span><span class="nv">ok</span><span class="o">=</span><span class="m">8</span><span class="w"> </span><span class="nv">changed</span><span class="o">=</span><span class="m">8</span><span class="w"> </span><span class="nv">unreachable</span><span class="o">=</span><span class="m">0</span><span class="w"> </span><span class="nv">failed</span><span class="o">=</span><span class="m">0</span>
</code></pre></div>
<p>File system state after install and before uninstall:</p>
<div class="highlight"><pre><span></span><code>administrator@W7X64-JF<span class="w"> </span>~
$<span class="w"> </span>ls<span class="w"> </span>-l<span class="w"> </span>/cygdrive/c<span class="w"> </span><span class="p">|</span>egrep<span class="w"> </span><span class="s2">&quot;jdk|jre&quot;</span>
drwx------+<span class="w"> </span><span class="m">1</span><span class="w"> </span>SYSTEM<span class="w"> </span>SYSTEM<span class="w"> </span><span class="m">0</span><span class="w"> </span>Dec<span class="w"> </span><span class="m">12</span><span class="w"> </span><span class="m">23</span>:17<span class="w"> </span>jdk1.7.0_45
drwx------+<span class="w"> </span><span class="m">1</span><span class="w"> </span>SYSTEM<span class="w"> </span>SYSTEM<span class="w"> </span><span class="m">0</span><span class="w"> </span>Jun<span class="w"> </span><span class="m">24</span><span class="w"> </span><span class="m">2010</span><span class="w"> </span>jdk5
drwx------+<span class="w"> </span><span class="m">1</span><span class="w"> </span>SYSTEM<span class="w"> </span>SYSTEM<span class="w"> </span><span class="m">0</span><span class="w"> </span>Oct<span class="w"> </span><span class="m">4</span><span class="w"> </span><span class="m">2012</span><span class="w"> </span>jdk6
drwx------+<span class="w"> </span><span class="m">1</span><span class="w"> </span>SYSTEM<span class="w"> </span>SYSTEM<span class="w"> </span><span class="m">0</span><span class="w"> </span>Oct<span class="w"> </span><span class="m">4</span><span class="w"> </span><span class="m">2012</span><span class="w"> </span>jdk7
drwx------+<span class="w"> </span><span class="m">1</span><span class="w"> </span>SYSTEM<span class="w"> </span>SYSTEM<span class="w"> </span><span class="m">0</span><span class="w"> </span>Dec<span class="w"> </span><span class="m">12</span><span class="w"> </span><span class="m">23</span>:17<span class="w"> </span>jre1.7.0_45
</code></pre></div>
<p>Uninstall JDK7 on Windows:</p>
<div class="highlight"><pre><span></span><code>copperpro:windows-hack<span class="w"> </span>mjohnson$<span class="w"> </span>ansible-playbook<span class="w"> </span>-i<span class="w"> </span>hosts<span class="w"> </span>jdk7_uninstall.yml

PLAY<span class="w"> </span><span class="o">[</span>uninstall<span class="w"> </span>oracle<span class="w"> </span>jdk7<span class="o">]</span><span class="w"> </span>**************************************************

TASK:<span class="w"> </span><span class="o">[</span>template<span class="w"> </span><span class="nv">src</span><span class="o">=</span>templates/usr_local_src_remove-programs.vbs<span class="w"> </span><span class="nv">dest</span><span class="o">=</span>/usr/local/src/remove-programs.vbs<span class="o">]</span><span class="w"> </span>***
changed:<span class="w"> </span><span class="o">[</span>w7x64-jf.pd.local<span class="o">]</span>

TASK:<span class="w"> </span><span class="o">[</span>shell<span class="w"> </span>cscript<span class="w"> </span>remove-programs.vbs<span class="w"> </span><span class="p">|</span>grep<span class="w"> </span><span class="s2">&quot;Java 7 Update 45 (64-bit)&quot;</span><span class="w"> </span><span class="nv">chdir</span><span class="o">=</span>/usr/local/src<span class="o">]</span><span class="w"> </span>***
changed:<span class="w"> </span><span class="o">[</span>w7x64-jf.pd.local<span class="o">]</span>

TASK:<span class="w"> </span><span class="o">[</span><span class="nb">command</span><span class="w"> </span>cscript<span class="w"> </span>remove-programs.vbs<span class="w"> </span>/uninstall<span class="w"> </span><span class="s2">&quot;Java 7 Update 45 (64-bit)&quot;</span><span class="w"> </span><span class="nv">chdir</span><span class="o">=</span>/usr/local/src<span class="o">]</span><span class="w"> </span>***
changed:<span class="w"> </span><span class="o">[</span>w7x64-jf.pd.local<span class="o">]</span>

TASK:<span class="w"> </span><span class="o">[</span>shell<span class="w"> </span>cscript<span class="w"> </span>remove-programs.vbs<span class="w"> </span><span class="p">|</span>grep<span class="w"> </span><span class="s2">&quot;Java SE Development Kit 7 Update 45 (64-bit)&quot;</span><span class="w"> </span><span class="nv">chdir</span><span class="o">=</span>/usr/local/src<span class="o">]</span><span class="w"> </span>***
changed:<span class="w"> </span><span class="o">[</span>w7x64-jf.pd.local<span class="o">]</span>

TASK:<span class="w"> </span><span class="o">[</span><span class="nb">command</span><span class="w"> </span>cscript<span class="w"> </span>remove-programs.vbs<span class="w"> </span>/uninstall<span class="w"> </span><span class="s2">&quot;Java SE Development Kit 7 Update 45 (64-bit)&quot;</span><span class="w"> </span><span class="nv">chdir</span><span class="o">=</span>/usr/local/src<span class="o">]</span><span class="w"> </span>***
changed:<span class="w"> </span><span class="o">[</span>w7x64-jf.pd.local<span class="o">]</span>

TASK:<span class="w"> </span><span class="o">[</span>file<span class="w"> </span><span class="nv">path</span><span class="o">=</span><span class="nv">$item</span><span class="w"> </span><span class="nv">state</span><span class="o">=</span>absent<span class="o">]</span><span class="w"> </span>******************************************
changed:<span class="w"> </span><span class="o">[</span>w7x64-jf.pd.local<span class="o">]</span><span class="w"> </span><span class="o">=</span>&gt;<span class="w"> </span><span class="o">(</span><span class="nv">item</span><span class="o">=</span>/usr/local/src/jdk-7u45-windows-x64.exe<span class="o">)</span>
changed:<span class="w"> </span><span class="o">[</span>w7x64-jf.pd.local<span class="o">]</span><span class="w"> </span><span class="o">=</span>&gt;<span class="w"> </span><span class="o">(</span><span class="nv">item</span><span class="o">=</span>/usr/local/src/jdk-install-log.txt<span class="o">)</span>
changed:<span class="w"> </span><span class="o">[</span>w7x64-jf.pd.local<span class="o">]</span><span class="w"> </span><span class="o">=</span>&gt;<span class="w"> </span><span class="o">(</span><span class="nv">item</span><span class="o">=</span>/usr/local/src/remove-programs.vbs<span class="o">)</span>

PLAY<span class="w"> </span>RECAP<span class="w"> </span>********************************************************************
w7x64-jf.pd.local<span class="w"> </span>:<span class="w"> </span><span class="nv">ok</span><span class="o">=</span><span class="m">6</span><span class="w"> </span><span class="nv">changed</span><span class="o">=</span><span class="m">6</span><span class="w"> </span><span class="nv">unreachable</span><span class="o">=</span><span class="m">0</span><span class="w"> </span><span class="nv">failed</span><span class="o">=</span><span class="m">0</span>
</code></pre></div>
<p>File system state after uninstall:</p>
<div class="highlight"><pre><span></span><code>administrator@W7X64-JF<span class="w"> </span>~
$<span class="w"> </span>ls<span class="w"> </span>-l<span class="w"> </span>/cygdrive/c<span class="w"> </span><span class="p">|</span>egrep<span class="w"> </span><span class="s2">&quot;jdk|jre&quot;</span>
drwx------+<span class="w"> </span><span class="m">1</span><span class="w"> </span>SYSTEM<span class="w"> </span>SYSTEM<span class="w"> </span><span class="m">0</span><span class="w"> </span>Jun<span class="w"> </span><span class="m">24</span><span class="w"> </span><span class="m">2010</span><span class="w"> </span>jdk5
drwx------+<span class="w"> </span><span class="m">1</span><span class="w"> </span>SYSTEM<span class="w"> </span>SYSTEM<span class="w"> </span><span class="m">0</span><span class="w"> </span>Oct<span class="w"> </span><span class="m">4</span><span class="w"> </span><span class="m">2012</span><span class="w"> </span>jdk6
drwx------+<span class="w"> </span><span class="m">1</span><span class="w"> </span>SYSTEM<span class="w"> </span>SYSTEM<span class="w"> </span><span class="m">0</span><span class="w"> </span>Oct<span class="w"> </span><span class="m">4</span><span class="w"> </span><span class="m">2012</span><span class="w"> </span>jdk7
</code></pre></div>
<p><br/></p>









  




                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
    <div class="md-copyright__highlight">
      <a rel="license" href="http://creativecommons.org/licenses/by-nc-sa/4.0/"><img alt="Creative Commons License" style="border-width:0" src="https://i.creativecommons.org/l/by-nc-sa/4.0/80x15.png" /></a>
    </div>
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    <script id="__config" type="application/json">{"base": "../..", "features": [], "search": "../../assets/javascripts/workers/search.b8dbb3d2.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}}</script>
    
    
      <script src="../../assets/javascripts/bundle.fe8b6f2b.min.js"></script>
      
        <script src="https://buttons.github.io/buttons.js"></script>
      
    
  </body>
</html>